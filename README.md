# Node Performance Playground

A tiny playground for profiling javascript code by inspecting the generated bytecode

## Usage

Generate `.profile` file for each javascript file in the root directory

```bash
make
```

Clean all `.profile` files in the root directory

```bash
make clean
```

## Output

```bash
$ make
✓ Generated earlyReturn.profile
```

```bash
$ cat earlyReturn.profile | head -20
[generated bytecode for function: main (0x26a884854fb9 <SharedFunctionInfo main>)]
Bytecode length: 49
Parameter count 2
Register count 3
Frame size 24
OSR nesting level: 0
Bytecode Age: 0
   71 S> 0x26a8848559ce @    0 : 0c                LdaZero
   77 E> 0x26a8848559cf @    1 : 6c 03 00          TestLessThan a0, [0]
         0x26a8848559d2 @    4 : 98 19             JumpIfFalse [25] (0x26a8848559eb @ 29)
   88 S> 0x26a8848559d4 @    6 : 21 00 01          LdaGlobal [0], [1]
         0x26a8848559d7 @    9 : c2                Star1
   96 E> 0x26a8848559d8 @   10 : 2d f9 01 03       LdaNamedProperty r1, [1], [3]
         0x26a8848559dc @   14 : c3                Star0
         0x26a8848559dd @   15 : 13 02             LdaConstant [2]
         0x26a8848559df @   17 : c1                Star2
   96 E> 0x26a8848559e0 @   18 : 5d fa f9 f8 05    CallProperty1 r0, r1, r2, [5]
  123 S> 0x26a8848559e5 @   23 : 0b 03             Ldar a0
  132 E> 0x26a8848559e7 @   25 : 46 ff 07          MulSmi [-1], [7]
  137 S> 0x26a8848559ea @   28 : a8                Return
```

```bash
$ make clean
✓ Done
```

## Resources

- V8 / Interpreter / ByteCodes https://source.chromium.org/chromium/chromium/src/+/main:v8/src/interpreter/bytecodes.h;drc=main